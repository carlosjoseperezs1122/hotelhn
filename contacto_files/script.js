var grow;function index(e){for(var t=e.parentNode.childNodes,n=0,r=0;r<t.length;r++){if(t[r]==e)return n;1==t[r].nodeType&&n++}return-1}function insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function serialize(e){for(s=[],i=0;i<e.elements.length;i++){var t=e.elements[i].name;t&&(s[s.length]=encodeURIComponent(t)+"="+encodeURIComponent(e.elements[i].value))}return s.join("&").replace(/%20/g,"+")}for(var el=document.querySelectorAll(".httl"),i=0;i<el.length;i++){var u=el[i].innerHTML,uls="";void 0!==el[i].dataset.name&&(uls="s"),el[i].outerHTML='<a href="http'+uls+"://"+u+'" rel="nofollow" target=_blank>'+u+"</a>"}function moreinfo(e){e.preventDefault();var t=document.querySelector("link[rel='canonical']");if(!t)return!1;var n="";15<(n=(n=window.getSelection)?window.getSelection().toString():document.selection.createRange().text).length&&(n=n+", "+t.getAttribute("href")),(e.clipboardData||window.clipboardData).setData("Text",n)}function vote(n,e){var t=new XMLHttpRequest;t.open("GET","/like.php?comid="+n+"&yes="+e,!0),t.onload=function(){var e,t;200<=this.status&&this.status<400&&(t=this.response,e=(t=(t=unescape(t)).split("|"))[0],t=t[1],"like"==e&&(document.querySelector("#like"+n).innerHTML=t))},t.send()}document.addEventListener("copy",moreinfo),document.addEventListener("DOMContentLoaded",function(e){var t,n=document.getElementById("body");if(document.getElementById("adresse")&&((t=document.getElementById("cat")).addEventListener("paste",function(e){return e.preventDefault(),!1}),t.addEventListener("drop",function(e){return e.preventDefault(),!1}),n.addEventListener("paste",function(e){return e.preventDefault(),!1}),n.addEventListener("drop",function(e){return e.preventDefault(),!1})),n){if(document.getElementById("myid")){function r(e){for(var t=0;t<i.length;t++)i[t].classList.remove("hover"),i[t].classList.remove("a-star"),i[t].classList.add("a-star-o");for(t=0;t<e+1;t++)i[t].classList.add("hover"),i[t].classList.remove("a-star-o"),i[t].classList.add("a-star")}for(var o,i=document.querySelectorAll(".stars .star"),u=0;u<i.length;u++)i[u].addEventListener("mouseover",function(e){r(index(this))});for(u=0;u<i.length;u++)i[u].addEventListener("click",function(e){e.preventDefault(),r(index(this)),o=document.querySelectorAll(".star.hover").length,document.querySelector(".rating").value=o});for(var a,u=0;u<i.length;u++)i[u].addEventListener("mouseleave",function(e){r(+o-1)});(a=document.createElement("input")).setAttribute("type","hidden"),a.setAttribute("id","onp"),a.setAttribute("name","onp"),a.value="0",insertAfter(a,n),n.addEventListener("drop",function(e){document.querySelector("#onp").value=1}),n.addEventListener("paste",function(e){document.querySelector("#onp").value=1})}(a=document.createElement("input")).setAttribute("type","hidden"),a.setAttribute("id","count"),a.setAttribute("name","count"),a.value="0",insertAfter(a,n),n.addEventListener("keydown",function(e){document.querySelector("#count").value=parseInt(document.querySelector("#count").value)+1})}var s=!1;document.getElementById("addform")&&(document.querySelector("#addform #submit").setAttribute("type","submit"),document.querySelector("#addform").addEventListener("submit",function(e){document.querySelector("#send").value="20"}));var d=document.getElementById("form-send");d&&d.addEventListener("submit",function(e){if(e.preventDefault(),s)return!1;s=!0;var t=serialize(d),e=new XMLHttpRequest;e.open("POST","/submit.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=function(){var t;msg=JSON.parse(this.responseText),s=!1,msg.status?(n.value="",document.querySelector("#count").value="0",(grow=document.createElement("div")).innerHTML=msg.html,grow.classList.add("new"),document.querySelector(".reviews").appendChild(grow),setTimeout('grow.style.maxHeight = "2000px"',100)):(t="",Object.values(msg.errors).forEach(function(e){t&&(t+=","),t=t+' <span class="error">'+e+"</span>"}),document.getElementById("errors").innerHTML=t)},e.send(t)})});